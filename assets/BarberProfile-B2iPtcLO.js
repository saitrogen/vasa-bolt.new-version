import{d as R,_ as z,i as u,h as H,n as G,c as l,a as t,L as J,g as N,$ as K,t as n,b as p,v as _,y as w,F as E,q as P,s as y,o,a0 as Q}from"./index-CNX9MZ4u.js";const X={class:"max-w-5xl mx-auto space-y-6 p-6"},Y={class:"card flex flex-col md:flex-row items-center md:items-stretch"},Z={class:"flex flex-col items-center justify-center md:w-1/4 p-6 border-r border-slate-200/80 dark:border-slate-800"},tt={class:"w-20 h-20 rounded-full bg-slate-200 dark:bg-slate-700 flex items-center justify-center text-3xl text-slate-500 dark:text-slate-400 mb-2"},et={key:0},st={key:1},at={class:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-1"},lt={class:"text-xs text-slate-500 dark:text-slate-400"},ot={class:"text-slate-700 dark:text-slate-300"},nt={class:"flex-1 grid grid-cols-1 md:grid-cols-2 gap-4 p-6"},dt={key:1,class:"text-slate-900 dark:text-slate-100"},it={key:1,class:"text-slate-900 dark:text-slate-100"},rt={key:1,class:"text-slate-900 dark:text-slate-100"},ct={key:1,class:"text-slate-900 dark:text-slate-100"},ut={class:"md:col-span-2"},vt={key:1,class:"text-slate-900 dark:text-slate-100"},mt={class:"flex flex-col justify-between p-6 md:w-32 md:border-l border-slate-200/80 dark:border-slate-800 items-end md:items-center"},xt={key:1,class:"flex gap-2 mt-2 md:mt-0"},bt={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},pt={class:"card card-content flex flex-col items-center"},_t={class:"text-2xl text-slate-900 dark:text-slate-100 font-bold"},ft={class:"card card-content flex flex-col items-center"},kt={class:"text-2xl text-green-600 dark:text-green-500 font-bold"},yt={class:"card card-content flex flex-col items-center"},gt={class:"text-2xl text-slate-900 dark:text-slate-100 font-bold"},ht={class:"card card-content"},wt={class:"flex gap-4 mb-4"},Ct={class:"w-full text-left"},St={class:"table-cell"},Dt={class:"table-cell"},Bt={class:"table-cell"},Tt={class:"table-cell"},Vt={class:"card card-content"},At={class:"w-full text-left"},$t={class:"table-cell"},It={class:"table-cell text-green-600 dark:text-green-500 font-bold"},Nt=R({__name:"BarberProfile",setup(Et){const U=z(),q=K(),f=U.params.id,r=u(null),c=u(!1),d=u({}),k=u([]),g=u([]),v=u({todayAppointments:0,todayCollection:0,monthlyCollection:0}),m=u("today"),C=async()=>{const{data:s,error:e}=await y.from("barbers").select("*").eq("id",f).single();!e&&s&&(r.value=s,d.value={...s})},F=async()=>{const{data:s,error:e}=await y.from("appointments").select("*, client:clients(*)").eq("barber_id",f).order("start_time",{ascending:!1});if(!e&&s){k.value=s;const x=new Date().toISOString().slice(0,10);v.value.todayAppointments=s.filter(i=>i.start_time.startsWith(x)).length}},M=async()=>{const{data:s,error:e}=await y.from("daily_collections").select("*").eq("barber_id",f).order("collection_date",{ascending:!1});if(!e&&s){g.value=s.filter(i=>i.collection_date===new Date().toISOString().slice(0,10)),v.value.todayCollection=g.value.reduce((i,b)=>i+b.total_amount_manually_entered,0);const x=new Date().toISOString().slice(0,7);v.value.monthlyCollection=s.filter(i=>i.collection_date.startsWith(x)).reduce((i,b)=>i+b.total_amount_manually_entered,0)}},j=async()=>{const{error:s}=await y.from("barbers").update(d.value).eq("id",f);s||(c.value=!1,C())},L=()=>{d.value={...r.value},c.value=!1},h=s=>m.value===s?"tab-active":"tab-inactive",O=H(()=>{const s=new Date().toISOString().slice(0,10);return m.value==="today"?k.value.filter(e=>e.start_time.startsWith(s)):m.value==="previous"?k.value.filter(e=>e.start_time<s):k.value.filter(e=>e.start_time>s)});function S(s){return new Date(s).toLocaleDateString(void 0,{month:"short",day:"numeric"})}function D(s){return new Date(s).toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"})}const W=()=>q.push({name:"Barbers"});return G(()=>{C(),F(),M()}),(s,e)=>{var x,i,b,B,T,V,A,$;return o(),l("div",X,[t("button",{onClick:W,class:"flex items-center text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200 text-sm font-medium mb-2 btn-ghost"},e[9]||(e[9]=[t("svg",{class:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M15 19l-7-7 7-7"})],-1),N(" Back to Barbers ")])),t("div",Y,[t("div",Z,[t("div",tt,[r.value?(o(),l("span",st,n((x=r.value.name)==null?void 0:x.charAt(0)),1)):(o(),l("span",et,"?"))]),t("div",at,n(((i=r.value)==null?void 0:i.name)||"Name"),1),t("div",lt,[e[10]||(e[10]=N("Staff ID: ")),t("span",ot,n(((b=r.value)==null?void 0:b.id)||"—"),1)])]),t("div",nt,[t("div",null,[e[11]||(e[11]=t("label",{class:"block text-slate-500 dark:text-slate-400 mb-1 text-xs"},"Name",-1)),c.value?p((o(),l("input",{key:0,"onUpdate:modelValue":e[0]||(e[0]=a=>d.value.name=a),class:"input"},null,512)),[[_,d.value.name]]):(o(),l("div",dt,n(((B=r.value)==null?void 0:B.name)||"—"),1))]),t("div",null,[e[12]||(e[12]=t("label",{class:"block text-slate-500 dark:text-slate-400 mb-1 text-xs"},"Phone (Work)",-1)),c.value?p((o(),l("input",{key:0,"onUpdate:modelValue":e[1]||(e[1]=a=>d.value.phone_number_work=a),class:"input"},null,512)),[[_,d.value.phone_number_work]]):(o(),l("div",it,n(((T=r.value)==null?void 0:T.phone_number_work)||"—"),1))]),t("div",null,[e[13]||(e[13]=t("label",{class:"block text-slate-500 dark:text-slate-400 mb-1 text-xs"},"Phone (Home)",-1)),c.value?p((o(),l("input",{key:0,"onUpdate:modelValue":e[2]||(e[2]=a=>d.value.phone_number_home=a),class:"input"},null,512)),[[_,d.value.phone_number_home]]):(o(),l("div",rt,n(((V=r.value)==null?void 0:V.phone_number_home)||"—"),1))]),t("div",null,[e[14]||(e[14]=t("label",{class:"block text-slate-500 dark:text-slate-400 mb-1 text-xs"},"Email",-1)),c.value?p((o(),l("input",{key:0,"onUpdate:modelValue":e[3]||(e[3]=a=>d.value.email=a),class:"input"},null,512)),[[_,d.value.email]]):(o(),l("div",ct,n(((A=r.value)==null?void 0:A.email)||"—"),1))]),t("div",ut,[e[15]||(e[15]=t("label",{class:"block text-slate-500 dark:text-slate-400 mb-1 text-xs"},"Address",-1)),c.value?p((o(),l("input",{key:0,"onUpdate:modelValue":e[4]||(e[4]=a=>d.value.home_address=a),class:"input"},null,512)),[[_,d.value.home_address]]):(o(),l("div",vt,n((($=r.value)==null?void 0:$.home_address)||"—"),1))])]),t("div",mt,[c.value?(o(),l("div",xt,[t("button",{onClick:j,class:"btn btn-primary"},"Save"),t("button",{onClick:L,class:"btn btn-outline"},"Cancel")])):(o(),l("button",{key:0,onClick:e[5]||(e[5]=a=>c.value=!0),class:"btn btn-secondary mt-2 md:mt-0"},"Edit"))])]),e[22]||(e[22]=J('<div class="grid grid-cols-1 md:grid-cols-2 gap-6" data-v-c1c59140><div class="card card-content" data-v-c1c59140><div class="text-slate-500 dark:text-slate-400 mb-2 text-xs" data-v-c1c59140>Visa Number</div><div class="text-slate-900 dark:text-slate-100 mb-4" data-v-c1c59140>—</div><div class="text-slate-500 dark:text-slate-400 mb-2 text-xs" data-v-c1c59140>Visa Expiry</div><div class="text-slate-900 dark:text-slate-100" data-v-c1c59140>—</div></div><div class="card card-content" data-v-c1c59140><div class="text-slate-500 dark:text-slate-400 mb-2 text-xs" data-v-c1c59140>Passport Number</div><div class="text-slate-900 dark:text-slate-100 mb-4" data-v-c1c59140>—</div><div class="text-slate-500 dark:text-slate-400 mb-2 text-xs" data-v-c1c59140>Visa Expiry</div><div class="text-slate-900 dark:text-slate-100" data-v-c1c59140>—</div></div></div>',1)),t("div",bt,[t("div",pt,[e[16]||(e[16]=t("div",{class:"text-slate-500 dark:text-slate-400 mb-2 text-xs"},"Today's Appointments",-1)),t("div",_t,n(v.value.todayAppointments),1)]),t("div",ft,[e[17]||(e[17]=t("div",{class:"text-slate-500 dark:text-slate-400 mb-2 text-xs"},"Today's Collection",-1)),t("div",kt,"$"+n(v.value.todayCollection.toFixed(2)),1)]),t("div",yt,[e[18]||(e[18]=t("div",{class:"text-slate-500 dark:text-slate-400 mb-2 text-xs"},"Monthly Collection",-1)),t("div",gt,"$"+n(v.value.monthlyCollection.toFixed(2)),1)])]),t("div",ht,[t("div",wt,[t("button",{class:w(h("previous")),onClick:e[6]||(e[6]=a=>m.value="previous")},"Previous",2),t("button",{class:w(h("today")),onClick:e[7]||(e[7]=a=>m.value="today")},"Today",2),t("button",{class:w(h("upcoming")),onClick:e[8]||(e[8]=a=>m.value="upcoming")},"Upcoming",2)]),t("table",Ct,[e[19]||(e[19]=t("thead",null,[t("tr",{class:"table-header"},[t("th",{class:"py-2"},"Date"),t("th",{class:"py-2"},"Start Time"),t("th",{class:"py-2"},"End Time"),t("th",{class:"py-2"},"Client")])],-1)),t("tbody",null,[(o(!0),l(E,null,P(O.value,a=>{var I;return o(),l("tr",{key:a.id,class:"table-row"},[t("td",St,n(S(a.start_time)),1),t("td",Dt,n(D(a.start_time)),1),t("td",Bt,n(D(a.end_time)),1),t("td",Tt,n(((I=a.client)==null?void 0:I.name)||"—"),1)])}),128))])])]),t("div",Vt,[e[21]||(e[21]=t("div",{class:"flex gap-4 mb-4"},[t("button",{class:"tab-active"},"Today")],-1)),t("table",At,[e[20]||(e[20]=t("thead",null,[t("tr",{class:"table-header"},[t("th",{class:"py-2"},"Date"),t("th",{class:"py-2"},"Amount")])],-1)),t("tbody",null,[(o(!0),l(E,null,P(g.value,a=>(o(),l("tr",{key:a.id,class:"table-row"},[t("td",$t,n(S(a.collection_date)),1),t("td",It,"$"+n(a.total_amount_manually_entered.toFixed(2)),1)]))),128))])])])])}}}),Ut=Q(Nt,[["__scopeId","data-v-c1c59140"]]);export{Ut as default};
