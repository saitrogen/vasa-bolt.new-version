import{d as w,i as m,r as B,h as V,n as R,c as l,a as e,b as i,E as _,f as S,v as f,F as u,q as c,s as p,t as y,o as r}from"./index-D64xMZbU.js";const I={class:"space-y-6"},M={class:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4"},U={class:"flex items-center gap-4"},C={class:"card p-4"},N={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},j=["value"],E={class:"card overflow-hidden"},F={class:"overflow-x-auto"},G={class:"min-w-full inline-block align-middle"},q={class:"overflow-hidden"},A={class:"min-w-full divide-y divide-slate-200 dark:divide-slate-800"},H={key:0,class:"divide-y divide-slate-200 dark:divide-slate-800"},L={key:1},O=["colspan"],z=w({__name:"Reports",setup(P){const d=m("daily"),n=m([]),b=m([]),s=B({startDate:"",endDate:"",barberId:""}),v=V(()=>n.value.length?Object.keys(n.value[0]):["Report Data"]),D=async()=>{let o=[];if(d.value==="daily"){const{data:t,error:a}=await p.rpc("get_daily_summary",{start_date:s.startDate||void 0,end_date:s.endDate||void 0});a||(o=t)}else if(d.value==="monthly"){const{data:t,error:a}=await p.rpc("get_monthly_summary",{start_date:s.startDate||void 0,end_date:s.endDate||void 0});a||(o=t)}else if(d.value==="barber"){const{data:t,error:a}=await p.rpc("get_barber_performance",{start_date:s.startDate||void 0,end_date:s.endDate||void 0,barber_id_param:s.barberId||void 0});a||(o=t)}n.value=o||[]},x=async()=>{const{data:o,error:t}=await p.from("barbers").select("*");t||(b.value=o)};return R(()=>{x()}),(o,t)=>(r(),l("div",I,[e("div",M,[t[5]||(t[5]=e("h1",{class:"text-2xl font-bold text-slate-900 dark:text-slate-100"},"Reports",-1)),e("div",U,[i(e("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>d.value=a),class:"select w-full md:w-64"},t[4]||(t[4]=[e("option",{value:"daily"},"Daily Summary",-1),e("option",{value:"monthly"},"Monthly Summary",-1),e("option",{value:"barber"},"Barber Performance",-1)]),512),[[_,d.value]]),e("button",{onClick:D,class:"btn btn-primary"},"Generate")])]),e("div",C,[e("div",N,[i(e("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>s.startDate=a),type:"date",class:"input"},null,512),[[f,s.startDate]]),i(e("input",{"onUpdate:modelValue":t[2]||(t[2]=a=>s.endDate=a),type:"date",class:"input"},null,512),[[f,s.endDate]]),d.value==="barber"?i((r(),l("select",{key:0,"onUpdate:modelValue":t[3]||(t[3]=a=>s.barberId=a),class:"select"},[t[6]||(t[6]=e("option",{value:""},"All Barbers",-1)),(r(!0),l(u,null,c(b.value,a=>(r(),l("option",{key:a.id,value:a.id},y(a.name),9,j))),128))],512)),[[_,s.barberId]]):S("",!0)])]),e("div",E,[e("div",F,[e("div",G,[e("div",q,[e("table",A,[e("thead",null,[e("tr",null,[(r(!0),l(u,null,c(v.value,a=>(r(),l("th",{key:a,scope:"col",class:"table-header px-6 py-3 text-left"},y(a),1))),128))])]),n.value.length>0?(r(),l("tbody",H,[(r(!0),l(u,null,c(n.value,(a,k)=>(r(),l("tr",{key:k,class:"table-row"},[(r(!0),l(u,null,c(v.value,(g,h)=>(r(),l("td",{key:h,class:"table-cell px-6 py-4"},y(a[g]),1))),128))]))),128))])):(r(),l("tbody",L,[e("tr",null,[e("td",{colspan:v.value.length,class:"text-center py-12"},t[7]||(t[7]=[e("div",{class:"text-slate-500 dark:text-slate-400"},[e("p",null,"No data to display."),e("p",{class:"text-sm"},'Select a report type and click "Generate".')],-1)]),8,O)])]))])])])])])]))}});export{z as default};
