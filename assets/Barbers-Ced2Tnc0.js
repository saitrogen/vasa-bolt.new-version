import{d as E,i,r as N,n as F,c,a as e,p as v,e as M,F as U,q as A,B as g,s as h,H as S,g as j,t as p,x as q,f as P,b as r,v as d,J as T,w as D,o as b}from"./index-BFEQWBay.js";import{_ as $}from"./Modal.vue_vue_type_script_setup_true_lang-DrVpGJl3.js";import{r as H}from"./PlusIcon-NzFvHLfC.js";const O={class:"space-y-6"},J={class:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4"},L={class:"card overflow-hidden"},W={class:"overflow-x-auto"},z={class:"min-w-full inline-block align-middle"},G={class:"overflow-hidden"},I={class:"min-w-full divide-y divide-slate-200 dark:divide-slate-800"},K={class:"divide-y divide-slate-200 dark:divide-slate-800"},Q={class:"table-cell px-6 py-4"},R={class:"table-cell px-6 py-4"},X={class:"table-cell px-6 py-4"},Y={class:"table-cell px-6 py-4 text-right"},Z=["onClick"],ee={class:"grid grid-cols-2 gap-4"},te={key:0},se={class:"flex items-center"},ae={class:"flex justify-end space-x-3 pt-4"},le=["disabled"],me=E({__name:"Barbers",setup(oe){const{addToast:n}=S(),f=i([]),x=i(!0),m=i(!1),u=i(!1),o=i(null),s=N({name:"",phone_number_work:"",phone_number_home:"",email:"",home_address:"",is_active:!0}),y=()=>{Object.assign(s,{name:"",phone_number_work:"",phone_number_home:"",email:"",home_address:"",is_active:!0})},k=()=>{o.value=null,y(),u.value=!0},B=l=>{o.value=l,Object.assign(s,{name:l.name,phone_number_work:l.phone_number_work||"",phone_number_home:l.phone_number_home||"",email:l.email||"",home_address:l.home_address||"",is_active:l.is_active}),u.value=!0},_=()=>{u.value=!1,o.value=null,y()},C=async()=>{if(!s.name.trim()){n({type:"error",title:"Validation Error",message:"Barber name is required"});return}m.value=!0;try{const l={name:s.name.trim(),phone_number_work:s.phone_number_work.trim()||null,phone_number_home:s.phone_number_home.trim()||null,email:s.email.trim()||null,home_address:s.home_address.trim()||null,is_active:s.is_active};if(o.value){const{error:t}=await h.from("barbers").update(l).eq("id",o.value.id);if(t)throw t;n({type:"success",title:"Success",message:"Barber updated successfully"})}else{const{error:t}=await h.from("barbers").insert(l);if(t)throw t;n({type:"success",title:"Success",message:"Barber created successfully"})}_(),await w()}catch(l){n({type:"error",title:"Error",message:l.message||"Failed to save barber"})}finally{m.value=!1}},w=async()=>{try{const{data:l,error:t}=await h.from("barbers").select("*").order("name");if(t)throw t;f.value=l||[]}catch{n({type:"error",title:"Error",message:"Failed to fetch barbers"})}};return F(async()=>{x.value=!0,await w(),x.value=!1}),(l,t)=>{const V=q("router-link");return b(),c("div",O,[e("div",J,[t[7]||(t[7]=e("h1",{class:"text-2xl font-bold text-slate-900 dark:text-slate-100"},"Barbers",-1)),e("button",{onClick:k,class:"btn btn-primary"},[v(M(H),{class:"w-4 h-4 md:mr-2"}),t[6]||(t[6]=e("span",{class:"hidden md:inline"},"Add Barber",-1))])]),e("div",L,[e("div",W,[e("div",z,[e("div",G,[e("table",I,[t[8]||(t[8]=e("thead",null,[e("tr",null,[e("th",{scope:"col",class:"table-header px-6 py-3 text-left"},"Name"),e("th",{scope:"col",class:"table-header px-6 py-3 text-left"},"Phone"),e("th",{scope:"col",class:"table-header px-6 py-3 text-left"},"Email"),e("th",{scope:"col",class:"table-header px-6 py-3 text-right"},"Actions")])],-1)),e("tbody",K,[(b(!0),c(U,null,A(f.value,a=>(b(),c("tr",{key:a.id,class:"table-row"},[e("td",Q,[v(V,{to:`/barbers/${a.id}`,class:"font-medium hover:underline"},{default:g(()=>[j(p(a.name),1)]),_:2},1032,["to"])]),e("td",R,p(a.phone_number_work),1),e("td",X,p(a.email),1),e("td",Y,[e("button",{onClick:re=>B(a),class:"btn btn-ghost"},"Edit",8,Z)])]))),128))])])])])])]),v($,{"is-open":u.value,title:o.value?"Edit Barber":"Add New Barber",onClose:_},{default:g(()=>[e("form",{onSubmit:D(C,["prevent"]),class:"space-y-4"},[e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Full Name * ",-1)),r(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>s.name=a),type:"text",required:"",class:"input",placeholder:"Enter barber's full name"},null,512),[[d,s.name]])]),e("div",ee,[e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Work Phone ",-1)),r(e("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>s.phone_number_work=a),type:"tel",class:"input",placeholder:"(555) 123-4567"},null,512),[[d,s.phone_number_work]])]),e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Personal Phone ",-1)),r(e("input",{"onUpdate:modelValue":t[2]||(t[2]=a=>s.phone_number_home=a),type:"tel",class:"input",placeholder:"(555) 123-4567"},null,512),[[d,s.phone_number_home]])])]),e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Email Address ",-1)),r(e("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>s.email=a),type:"email",class:"input",placeholder:"barber@example.com"},null,512),[[d,s.email]])]),e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Home Address ",-1)),r(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=a=>s.home_address=a),rows:"3",class:"textarea",placeholder:"Enter home address..."},null,512),[[d,s.home_address]])]),o.value?(b(),c("div",te,[e("label",se,[r(e("input",{"onUpdate:modelValue":t[5]||(t[5]=a=>s.is_active=a),type:"checkbox",class:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"},null,512),[[T,s.is_active]]),t[14]||(t[14]=e("span",{class:"ml-2 text-sm text-gray-700"},"Barber is active",-1))])])):P("",!0),e("div",ae,[e("button",{type:"button",onClick:_,class:"btn btn-outline"}," Cancel "),e("button",{type:"submit",disabled:m.value,class:"btn btn-primary"},p(m.value?"Saving...":o.value?"Update":"Create"),9,le)])],32)]),_:1},8,["is-open","title"])])}}});export{me as default};
