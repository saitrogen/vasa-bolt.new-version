import{c as l,a as t,o as n,d as T,i as u,r as A,n as O,p as d,e as c,f as g,F as V,q as $,C as H,g as M,B as L,s as b,H as P,t as v,y as N,w as j,k as z,L as G,b as p,v as x,J}from"./index-xkOOj8vl.js";import{_ as Z}from"./Modal.vue_vue_type_script_setup_true_lang-Dp5sxbA3.js";import{r as q}from"./PlusIcon-DaUhA_JQ.js";import{r as I}from"./PencilSquareIcon-89d4YGpt.js";function K(E,r){return n(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}const Q={class:"space-y-6"},R={class:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4"},W={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},X={class:"p-5 flex-grow"},Y={class:"flex items-start justify-between"},ee={class:"text-lg font-semibold text-slate-900 dark:text-slate-100 pr-4"},te=["onClick"],se={key:0,class:"text-slate-500 dark:text-slate-400 mt-2 text-sm min-h-[40px]"},ae={class:"flex items-center gap-6 mt-4 text-sm"},ie={class:"flex items-center gap-2 text-primary-600 dark:text-primary-400 font-semibold"},re={class:"flex items-center gap-2 text-slate-500 dark:text-slate-400"},le={class:"card-footer bg-slate-50 dark:bg-slate-800/50 p-3"},ne=["onClick"],oe={key:1,class:"col-span-full"},de={class:"text-center py-12"},ce={class:"mt-6"},ue={class:"grid grid-cols-2 gap-4"},ve={class:"relative"},pe={key:0,class:"form-control"},me={class:"label cursor-pointer justify-start"},fe={class:"flex justify-end gap-3 pt-4"},ge=["disabled"],ke=T({__name:"Services",setup(E){const{addToast:r}=P(),y=u([]),m=u(!0),f=u(!1),w=u(!1),o=u(null),i=A({name:"",price:0,duration_minutes:30,description:"",is_active:!0}),h=()=>{Object.assign(i,{name:"",price:0,duration_minutes:30,description:"",is_active:!0})},S=()=>{C(null)},F=s=>{C(s)},C=s=>{o.value=s,s?Object.assign(i,{name:s.name,price:s.price,duration_minutes:s.duration_minutes,description:s.description||"",is_active:s.is_active}):h(),w.value=!0},k=()=>{w.value=!1,o.value=null,h()},U=async()=>{if(!i.name.trim()||i.price<=0||i.duration_minutes<=0){r({type:"error",title:"Validation Error",message:"Please fill in all required fields with valid values"});return}f.value=!0;try{const s={name:i.name.trim(),price:i.price,duration_minutes:i.duration_minutes,description:i.description.trim()||null,is_active:i.is_active};if(o.value){const{error:e}=await b.from("services").update(s).eq("id",o.value.id);if(e)throw e;r({type:"success",title:"Success",message:"Service updated successfully"})}else{const{error:e}=await b.from("services").insert(s);if(e)throw e;r({type:"success",title:"Success",message:"Service created successfully"})}k(),await _()}catch(s){r({type:"error",title:"Error",message:s.message||"Failed to save service"})}finally{f.value=!1}},B=async s=>{try{const{error:e}=await b.from("services").update({is_active:!s.is_active}).eq("id",s.id);if(e)throw e;r({type:"success",title:"Success",message:`Service ${s.is_active?"deactivated":"activated"} successfully`}),await _()}catch{r({type:"error",title:"Error",message:"Failed to update service status"})}},_=async()=>{m.value=!0;try{const{data:s,error:e}=await b.from("services").select("*").order("name");if(e)throw e;y.value=s||[]}catch{r({type:"error",title:"Error",message:"Failed to fetch services"})}finally{m.value=!1}};return O(()=>{_()}),(s,e)=>(n(),l("div",Q,[t("div",R,[e[6]||(e[6]=t("h1",{class:"text-2xl font-bold text-slate-900 dark:text-slate-100"},"Services",-1)),t("button",{onClick:S,class:"btn btn-primary"},[d(c(q),{class:"w-4 h-4 md:mr-2"}),e[5]||(e[5]=t("span",{class:"hidden md:inline"},"Add Service",-1))])]),t("div",W,[(n(!0),l(V,null,$(y.value,a=>(n(),l("div",{key:a.id,class:"card flex flex-col transition-all duration-300 hover:shadow-lg dark:hover:shadow-primary-500/10"},[t("div",X,[t("div",Y,[t("h3",ee,v(a.name),1),t("div",{onClick:j(D=>B(a),["stop"]),class:N(["relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-slate-900 focus:ring-primary-500",a.is_active?"bg-primary-500":"bg-slate-200 dark:bg-slate-700"])},[t("span",{class:N(["pointer-events-none inline-block h-5 w-5 rounded-full bg-white shadow transform ring-0 transition ease-in-out duration-200",a.is_active?"translate-x-5":"translate-x-0"])},null,2)],10,te)]),a.description?(n(),l("p",se,v(a.description),1)):g("",!0),t("div",ae,[t("div",ie,[d(c(z),{class:"w-5 h-5"}),t("span",null,"$"+v(a.price),1)]),t("div",re,[d(c(K),{class:"w-5 h-5"}),t("span",null,v(a.duration_minutes)+" min",1)])])]),t("div",le,[t("button",{onClick:D=>F(a),class:"btn btn-sm btn-ghost w-full"},[d(c(I),{class:"w-4 h-4 mr-2"}),e[7]||(e[7]=M(" Edit "))],8,ne)])]))),128)),m.value?(n(),l(V,{key:0},$(4,a=>t("div",{key:`skel-${a}`,class:"card"},e[8]||(e[8]=[G('<div class="p-5"><div class="animate-pulse flex flex-col space-y-4"><div class="flex justify-between items-start"><div class="h-4 bg-slate-200 dark:bg-slate-700 rounded w-3/4"></div><div class="h-6 w-11 bg-slate-200 dark:bg-slate-700 rounded-full"></div></div><div class="space-y-2"><div class="h-2 bg-slate-200 dark:bg-slate-700 rounded"></div><div class="h-2 bg-slate-200 dark:bg-slate-700 rounded w-5/6"></div></div><div class="flex gap-6"><div class="h-4 bg-slate-200 dark:bg-slate-700 rounded w-1/4"></div><div class="h-4 bg-slate-200 dark:bg-slate-700 rounded w-1/4"></div></div></div></div><div class="card-footer bg-slate-50 dark:bg-slate-800/50 p-3"><div class="h-8 bg-slate-200 dark:bg-slate-700 rounded w-full animate-pulse"></div></div>',2)]))),64)):g("",!0),!m.value&&y.value.length===0?(n(),l("div",oe,[t("div",de,[d(c(H),{class:"mx-auto h-12 w-12 text-gray-400"}),e[10]||(e[10]=t("h3",{class:"mt-2 text-sm font-medium text-gray-900 dark:text-gray-100"},"No services",-1)),e[11]||(e[11]=t("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},"Get started by creating your first service.",-1)),t("div",ce,[t("button",{onClick:S,class:"btn btn-primary"},[d(c(q),{class:"w-4 h-4 mr-2"}),e[9]||(e[9]=M(" Add Service "))])])])])):g("",!0)]),d(Z,{"is-open":w.value,title:o.value?"Edit Service":"Add New Service",onClose:k},{default:L(()=>[t("form",{onSubmit:j(U,["prevent"]),class:"space-y-4"},[t("div",null,[e[12]||(e[12]=t("label",{class:"label"}," Service Name * ",-1)),p(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>i.name=a),type:"text",required:"",class:"input",placeholder:"e.g., Men's Haircut"},null,512),[[x,i.name]])]),t("div",ue,[t("div",null,[e[14]||(e[14]=t("label",{class:"label"}," Price * ",-1)),t("div",ve,[e[13]||(e[13]=t("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[t("span",{class:"text-gray-500 sm:text-sm"},"$")],-1)),p(t("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>i.price=a),type:"number",step:"0.01",min:"0",required:"",class:"input pl-8",placeholder:"0.00"},null,512),[[x,i.price,void 0,{number:!0}]])])]),t("div",null,[e[15]||(e[15]=t("label",{class:"label"}," Duration (minutes) * ",-1)),p(t("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>i.duration_minutes=a),type:"number",min:"5",step:"5",required:"",class:"input",placeholder:"30"},null,512),[[x,i.duration_minutes,void 0,{number:!0}]])])]),t("div",null,[e[16]||(e[16]=t("label",{class:"label"}," Description ",-1)),p(t("textarea",{"onUpdate:modelValue":e[3]||(e[3]=a=>i.description=a),rows:"3",class:"textarea",placeholder:"Optional description of the service..."},null,512),[[x,i.description]])]),o.value?(n(),l("div",pe,[t("label",me,[p(t("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>i.is_active=a),type:"checkbox",class:"checkbox"},null,512),[[J,i.is_active]]),e[17]||(e[17]=t("span",{class:"label-text ml-3"},"Service is active",-1))])])):g("",!0),t("div",fe,[t("button",{type:"button",onClick:k,class:"btn btn-secondary"}," Cancel "),t("button",{type:"submit",disabled:f.value,class:"btn btn-primary"},v(f.value?"Saving...":o.value?"Update Service":"Create Service"),9,ge)])],32)]),_:1},8,["is-open","title"])]))}});export{ke as default};
